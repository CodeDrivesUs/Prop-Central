@model IEnumerable<Newhomesolutions.Models.flat>
@{

    Layout = null;
    Newhomesolutions.Models.ApplicationDbContext db = new Newhomesolutions.Models.ApplicationDbContext();
    var show = "Showing Results from " + ViewBag.from + " to " + ViewBag.to + " of " + ViewBag.count;
}
<div class="row">
    @foreach (var item in Model)
    {
        //int space = item.AvailableSpa(item.Flatid);
        //if (space > 0)
        //{
        var flatimage = db.FlatImages.Where(x => x.Flatid == item.Flatid && x.Type == "Main").Select(x => x.Image).FirstOrDefault();

        <div class="col-lg-6 col-md-6">
            <div class="single_place">
                <div class="thumb">
                    @if (flatimage != null)
                    {
                        var base64 = Convert.ToBase64String(flatimage);
                        var imgsrc = string.Format("data:image/jpg;base64,{0}", base64);


                        <img src="@imgsrc" alt="" height="240">
                    }

                    <a href="/flats/View?id=@item.Flatid" class="prise">R @item.RentingPrice</a>
                </div>
                <div class="place_info">
                    <a href="/flats/View?id=@item.Flatid"><h3>@item.name</h3></a>
                    <p><i class="glyphicon glyphicon-map-marker text-danger"></i> <span>@item.getlocation(item.Flatid)</span> </p>
                    <div class="rating_days d-flex justify-content-between">
                        <span class="d-flex justify-content-center align-items-center">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <a href="#">(20 Review)</a>
                        </span>
                        <div class="days">
                            <i class="fa fa-clock-o"></i>
                            <a href="#">5 Days</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

</div>
<div class="row">
    <div class="col-lg-12">
        <div class="more_place_btn text-center">
            <nav aria-label="Page navigation example">
                <div class="row">
                    <div class="col-lg-6">
                        <ul class="pagination">
                            @if ((int)ViewBag.current == 1)
                            {
                                <li class="page-item disabled"><a class="page-link disabled" href="#">Previous</a></li>
                            }
                            else
                            {
                                <li class="page-item"><a class="page-link" href='@Url.Action("Pagination", "Home", new { page = ((int)ViewBag.current-1) })'>Previous</a></li>
                            }
                            @for (int i = 1; i <= (int)ViewBag.final; i++)
                            {
                                if (i == (int)ViewBag.current)
                                {
                                    <li class="page-item active"><a class="page-link" href='@Url.Action("Pagination", "Home", new { page = i })'>@i</a></li>
                                }
                                else
                                {
                                    <li class="page-item"><a class="page-link" href='@Url.Action("Pagination", "Home", new { page = i })'>@i</a></li>
                                }
                            }
                            @if ((int)ViewBag.current == (int)ViewBag.final)
                            {
                                <li class="page-item disabled"><a class="page-link disabled" href="#">Next</a></li>
                            }
                            else
                            {
                                <li class="page-item"><a class="page-link" href='@Url.Action("Pagination", "Home", new { page = ((int)ViewBag.current + 1) })'>Next</a></li>
                            }
                        </ul>

                    </div>
                    <div class="col-lg-6">
                        <p class="text-center" style="margin-top:17px;">
                            @show
                        </p>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</div>